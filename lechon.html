<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>POS System</title> 

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
      * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}
s
body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background-color: #ffffff; /* White background */
    color: #333333; /* Darker text for readability */
    padding: 20px;
    line-height: 1.6;
}

/* Navigation Bar Styles */
.nav-bar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px 30px;
    background-color: #007bff; /* Blue background */
    color: #ffffff; /* White text */
    border-radius: 5px;
    margin-bottom: 20px;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
}

.nav-bar img {
    height: 40px;
}

.nav-items a {
    color: #ffffff; /* White text */
    text-decoration: none;
    padding: 10px 15px;
    border-radius: 5px;
    font-weight: bold;
    margin-left: 15px;
}

.nav-items a.active,
.nav-items a:hover {
    background-color: #0056b3; /* Darker blue on hover */
}

/* Product Grid Styles */
.product-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    gap: 20px;
    padding: 0 20px;
}

.product {
    background-color: #f8f9fa; /* Light gray background */
    padding: 15px;
    border-radius: 10px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    text-align: center;
    color: #333333; /* Dark text */
    transition: all 0.3s ease;
}

.product:hover {
    background-color: #e9ecef; /* Slightly darker on hover */
}

.product img {
    width: 100%;
    height: 300px;
    object-fit: cover;
    border-radius: 10px;
}

.product h3 {
    margin-top: 10px;
    font-size: 1.2em;
    font-weight: bold;
}

.product select {
    width: 100%;
    padding: 8px;
    margin-top: 10px;
    border-radius: 5px;
    border: 1px solid #ccc;
    background-color: #ffffff; /* White background */
    color: #333333; /* Dark text */
}

.price {
    font-size: 1.1em;
    margin-top: 10px;
    font-weight: bold;
}

.product button {
    background-color: #28a745; /* Green button */
    color: #ffffff; /* White text */
    border: none;
    padding: 10px 20px;
    border-radius: 5px;
    cursor: pointer;
    margin-top: 15px;
    transition: background-color 0.3s ease;
}

.product button:hover {
    background-color: #218838; /* Darker green on hover */
}

/* Cart Styles */
.cart {
    width: 100%;
    max-width: 400px;
    padding: 20px;
    background-color: #f8f9fa; /* Light gray */
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    border-radius: 10px;
    margin-top: 20px;
    color: #333333;
}

.cart h3 {
    font-size: 1.5em;
    margin-bottom: 20px;
    font-weight: bold;
}

.cart .order-summary {
    font-size: 1.1em;
    margin-top: 20px;
    padding-top: 10px;
    border-top: 1px solid #ccc;
}

.cart .order-summary div {
    margin-bottom: 10px;
}

/* Calculator Styles */
.calculator {
    width: 100%;
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 10px;
    margin-top: 20px;
}

.calculator button,
.calculator input {
    padding: 15px;
    font-size: 1.2em;
    text-align: center;
    border-radius: 5px;
    border: 1px solid #ccc;
    background-color: #f8f9fa; /* Light gray */
    transition: background-color 0.3s ease;
    color: #333333; /* Dark text */
}

.calculator button:hover,
.calculator input:focus {
    background-color: #e2e6ea; /* Slightly darker gray */
}

.calculator button.red {
    background-color: #dc3545; /* Red button */
}

.calculator button.red:hover {
    background-color: #c82333; /* Darker red */
}

.calculator button.blue {
    background-color: #007bff; /* Blue button */
}

.calculator button.blue:hover {
    background-color: #0056b3; /* Darker blue */
}

@media print {
    body {
        background-color: #fff;
        padding: 0;
        margin: 0;
    }

    #receipt {
        display: block;
        width: 100%;
        margin: 0;
        padding: 10px;
        box-shadow: none;
        border-radius: 0;
        font-size: 1em; 
    }

    #receipt, #receipt * {
        page-break-inside: avoid;
        page-break-before: avoid;
        page-break-after: avoid;
    }

    #receipt h2 {
        font-size: 1.2em;
    }

    .nav-bar, .product-grid, .cart, .calculator {
        display: none;
    }

    #receipt p {
        margin: 5px 0;
        font-size: 1em;
    }

    #receipt button {
        font-size: 1em;
    }

    #receipt {
        max-width: 100%;
        width: 100%;
        white-space: normal;
    }
}

    </style>
</head>
<body>

    <div class="nav-bar">
        <img src="images/logo.jpg" alt="logo">
        <div class="nav-items">
            <a href="#index.html" class="active">Home</a>
            <a href="../POS/dashboard/charts.html">Sales</a>
        </div>
    </div>
    
    <div class="product-grid" id="product-grid"></div>

    <div class="cart">
        <h3>Your Cart</h3>
        <div id="cart-items"></div>
        <div class="order-summary">
            <div>Total: <span id="total-₱">₱0</span></div>
            <button onclick="calculatePayment()">Proceed to Payment</button>
            <button onclick="window.print()">Print Receipt</button>
        </div>
    </div>

    <div class="calculator">
        <button onclick="addDigit(1)" class="blue">1</button>
        <button onclick="addDigit(2)" class="blue">2</button>
        <button onclick="addDigit(3)" class="blue">3</button>
        <button onclick="clearAmount()" class="red">C</button>

        <button onclick="addDigit(4)" class="blue">4</button>
        <button onclick="addDigit(5)" class="blue">5</button>
        <button onclick="addDigit(6)" class="blue">6</button>
        <button onclick="deleteLastDigit()" class="red">←</button>

        <button onclick="addDigit(7)" class="blue">7</button>
        <button onclick="addDigit(8)" class="blue">8</button>
        <button onclick="addDigit(9)" class="blue">9</button>
        <button onclick="addDigit(0)" class="blue">0</button>

        <input type="text" id="amount-paid" disabled>
    </div>

    <div id="receipt">
        <h2 style="color:white;">Receipt</h2>
        <p style="color:white;">Store Name: <span id="store-name">SIONY BROQUEZA - Proprietor</span></p>
        <p style="color:white;">Store Address: <span id="store-address">National Road, Tunasan Muntinlupa City</span></p>
        <p style="color:white;">Store Phone: <span id="store-phone">(0938 457 6371) / (0906) 245-1132</span></p>
        <p style="color:white;">Receipt No: <span id="receipt-number">2024</span></p>
        <p style="color:white;">Date/Time: <span id="date-time"></span></p>
        
        <!-- Add this new section for items -->
        <div id="receipt-items"></div>
    
        <p style="color:white;">Total: ₱<span id="receipt-total"></span></p>
        <p style="color:white;">Paid: ₱<span id="amount-paid-receipt"></span></p>
        <p style="color:white;">Change: ₱<span id="receipt-change"></span></p>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        const priceMap = {
            "lechon_baboy": {
                "Medium": 6500,
                "Large": 7500,
                "Jumbo": 8500,
                "Super Jumbo": 12000,
                "Super Jumbo Jumbo": 15000
            },
            "lechon_paella": {
                "Small": 8000,
                "Medium": 9000,
                "Large": 11000
            },
            "lechon_kambing": {
                "Medium": 8000,
                "Large": 8500,
                "Jumbo": 9500,
                "Super Jumbo": 11000
            },
            "lechon_baka": {
                "Medium": 40000,
                "Large": 45000,
                "Jumbo": 50000
            }
        };

        let cart = [];
        let receiptNumber=2024;
        let totalAmount = 0;

        function updateTotal() {
            const formattedTotal = totalAmount.toLocaleString();
            document.getElementById("total-₱").textContent = `₱${formattedTotal}`;
        }

        function addDigit(digit) {
            totalAmount = totalAmount * 10 + digit;
            updateTotal();
        }

        function deleteLastDigit() {
            totalAmount = Math.floor(totalAmount / 10);
            updateTotal();
        }

        function clearAmount() {
            totalAmount = 0;
            updateTotal();
        }

        function calculatePayment() {
            alert("Proceeding to payment");
        }

        updateTotal();
        function loadProducts() {
            const grid = document.getElementById('product-grid');
            for (const product in priceMap) {
                const productDiv = document.createElement('div');
                productDiv.classList.add('product');
                const sizes = Object.keys(priceMap[product]);

                productDiv.innerHTML = `
                    <img src="images/${product}.jpg" alt="${product}">
                    <h3>${product.replace(/-/g, ' ').toUpperCase()}</h3>
                    <select onchange="addToCart('${product}', this.value)">
                        <option value="">Select Size</option>
                        ${sizes.map(size => `<option value="${size}">${size} - ₱${priceMap[product][size]}</option>`).join('')}
                    </select>
                    <div class="price">Prices: ₱${sizes.map(size => priceMap[product][size]).join(' | ')}</div>
                `;
                grid.appendChild(productDiv);
            }
        }

        function addToCart(product, size) {
            if (!size) return;
            const price = priceMap[product][size];
            cart.push({ product, size, price });
            updateCart();
        }

        function updateCart() {
            const cartItems = document.getElementById('cart-items');
            cartItems.innerHTML = cart.map(item => `
                <div>${item.product.replace(/-/g, ' ').toUpperCase()} - ${item.size}: ₱${item.price}</div>
            `).join('');
            const total = cart.reduce((sum, item) => sum + item.price, 0);
            document.getElementById('total-₱').innerText = total;
        }

        function calculatePayment() {
            const amountPaid = document.getElementById('amount-paid').value;
            const total = cart.reduce((sum, item) => sum + item.price, 0);
            const change = amountPaid - total;

            document.getElementById('receipt-total').innerText = total;
            document.getElementById('amount-paid-receipt').innerText = amountPaid;
            document.getElementById('receipt-change').innerText = change;

            const now = new Date();
            document.getElementById('date-time').innerText = now.toLocaleString();

            document.getElementById('receipt-number').innerText = receiptNumber;
            receiptNumber++; // Increment the receipt number for next time

            const receiptItems = cart.map(item => 
                `<p>${item.product.replace(/-/g, ' ').toUpperCase()} - ${item.size}: ₱${item.price}</p>`
            ).join('');
            document.getElementById('receipt-items').innerHTML = receiptItems;

            document.getElementById('receipt').style.display = 'block';
        }

        function showReceipt(cartItems, totalAmount, amountPaid) {
            const receipt = document.getElementById('receipt');
            const receiptNumberElement = document.getElementById('receipt-number');
            const receiptDateElement = document.getElementById('receipt-date');
            const receiptItemsElement = document.getElementById('receipt-items');
            const receiptTotalElement = document.getElementById('receipt-total');
            const amountPaidElement = document.getElementById('amount-paid');
            const receiptChangeElement = document.getElementById('receipt-change');

            const { date, time } = getCurrentDateTime();

            receiptNumberElement.innerText = getNewReceiptNumber();
            receiptDateElement.innerText = `${date} ${time}`;

            let itemsHtml = '';
            cartItems.forEach(item => {
                itemsHtml += `<p>${item.name} x${item.quantity} - ₱${formatNumberWithCommas(item.price * item.quantity)}</p>`;
            });
            receiptItemsElement.innerHTML = itemsHtml;

            receiptTotalElement.innerText = formatNumberWithCommas(totalAmount);
            amountPaidElement.innerText = formatNumberWithCommas(amountPaid);
            receiptChangeElement.innerText = formatNumberWithCommas(amountPaid - totalAmount);

            receipt.style.display = 'block';
        }

        function addDigit(digit) {
            const amountInput = document.getElementById('amount-paid');
            amountInput.value += digit;
        }

        function clearAmount() {
            document.getElementById('amount-paid').value = '';
        }

        function deleteLastDigit() {
            const amountInput = document.getElementById('amount-paid');
            amountInput.value = amountInput.value.slice(0, -1);
        }

        loadProducts();

    </script>
</body>
</html>